{% extends "pos_system/base_print.html" %}

{% block content %}
<div class="print-header">
    <h2>Sales Report - {{ business.name }}</h2>
    {% if start_date or end_date %}
    <p class="date-range">
        {% if start_date and end_date %}
            From {{ start_date|date:"d M Y" }} to {{ end_date|date:"d M Y" }}
        {% elif start_date %}
            From {{ start_date|date:"d M Y" }}
        {% elif end_date %}
            Until {{ end_date|date:"d M Y" }}
        {% endif %}
    </p>
    {% endif %}
    <p class="print-date">Printed on: {% now "d M Y H:i" %}</p>
</div>

<div class="print-summary">
    <div class="summary-item">
        <span>Total Sales:</span>
        <strong>ZMW {{ total_sales|floatformat:2 }}</strong>
    </div>
    <div class="summary-item">
        <span>Transactions:</span>
        <strong>{{ total_transactions }}</strong>
    </div>
    <div class="summary-item">
        <span>Average Sale:</span>
        <strong>ZMW {{ avg_sale|floatformat:2 }}</strong>
    </div>
</div>

<table class="print-table">
    <thead>
        <tr>
            <th>Transaction ID</th>
            <th>Date</th>
            <th class="text-right">Items</th>
            <th class="text-right">Total (ZMW)</th>
            <th class="text-right">Payment</th>
        </tr>
    </thead>
    <tbody>
        {% for sale in sales %}
        <tr>
            <td>{{ sale.transaction_id }}</td>
            <td>{{ sale.created_at|date:"d M Y H:i" }}</td>
            <td class="text-right">{{ sale.pos_system_items.count }}</td>
            <td class="text-right">ZMW {{ sale.total|floatformat:2 }}</td>
            <td class="text-right">{{ sale.get_payment_method_display }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="text-center">No sales found</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="print-footer">
    <p>Report generated by {{ request.user.get_full_name|default:request.user.username }}</p>
</div>
{% endblock %}